import{r as t,c as e,h as o,g as n,f as s,H as i}from"./p-4161678b.js";const r=class{constructor(o){t(this,o),this.todo=e(this,"todo",7)}render(){return o("li",null,o("label",{class:"checkbox"},o("input",{type:"checkbox",checked:this.done,onClick:()=>this.todo.emit(this.n)}),o("span",{class:{done:this.done}},this.text)))}};r.style=".done{text-decoration:line-through;color:grey}";const c=t=>!("isConnected"in t)||t.isConnected,l=(()=>{let t;return(...e)=>{t&&clearTimeout(t),t=setTimeout((()=>{t=0,(t=>{for(let e of t.keys())t.set(e,t.get(e).filter(c))})(...e)}),2e3)}})(),{state:a}=(()=>{const t=((t,e=((t,e)=>t!==e))=>{let o=new Map(Object.entries(null!=t?t:{}));const n={dispose:[],get:[],set:[],reset:[]},s=()=>{o=new Map(Object.entries(null!=t?t:{})),n.reset.forEach((t=>t()))},i=t=>(n.get.forEach((e=>e(t))),o.get(t)),r=(t,s)=>{const i=o.get(t);e(s,i,t)&&(o.set(t,s),n.set.forEach((e=>e(t,s,i))))},c="undefined"==typeof Proxy?{}:new Proxy(t,{get:(t,e)=>i(e),ownKeys:()=>Array.from(o.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(t,e)=>o.has(e),set:(t,e,o)=>(r(e,o),!0)}),l=(t,e)=>(n[t].push(e),()=>{((t,e)=>{const o=t.indexOf(e);o>=0&&(t[o]=t[t.length-1],t.length--)})(n[t],e)});return{state:c,get:i,set:r,on:l,onChange:(e,o)=>{const n=l("set",((t,n)=>{t===e&&o(n)})),s=l("reset",(()=>o(t[e])));return()=>{n(),s()}},use:(...t)=>{const e=t.reduce(((t,e)=>(e.set&&t.push(l("set",e.set)),e.get&&t.push(l("get",e.get)),e.reset&&t.push(l("reset",e.reset)),e.dispose&&t.push(l("dispose",e.dispose)),t)),[]);return()=>e.forEach((t=>t()))},dispose:()=>{n.dispose.forEach((t=>t())),s()},reset:s,forceUpdate:t=>{const e=o.get(t);n.set.forEach((o=>o(t,e,e)))}}})({count:0,list:[{text:"lean TypeScript",done:!0},{text:"build Stencil App",done:!1}]},void 0);return t.use((()=>{if("function"!=typeof n)return{};const t=new Map;return{dispose:()=>t.clear(),get:e=>{const o=n();o&&((t,e,o)=>{const n=t.get(e);n?n.includes(o)||n.push(o):t.set(e,[o])})(t,e,o)},set:e=>{const o=t.get(e);o&&t.set(e,o.filter(s)),l(t)},reset:()=>{t.forEach((t=>t.forEach(s))),l(t)}}})()),t})();function u(){a.count=a.list.reduce(((t,e)=>t+(e.done?0:1)),0)}function d(){localStorage.setItem("todo",JSON.stringify({list:a.list})),u()}!function(){const t=localStorage.getItem("todo");if(t){const e=JSON.parse(t);a.list=e.list}u()}();const p=class{constructor(e){t(this,e),this.loading=!0,this.disabled=!0,this.onPurge=t=>{t.preventDefault(),a.list=a.list.filter((t=>!t.done)),d()},this.onAdd=t=>{t.preventDefault(),a.list.push({text:this.input.value,done:!1}),d(),this.input.value="",this.disabled=!0},this.onKeyUp=()=>{this.disabled=!this.input.value}}render(){return((t,e)=>t.loading?setTimeout((()=>t.loading=!1),0):e)(this,o(i,null,o("h2",null,"Todo"),o(h,{purge:this.onPurge}),o(f,null),o(g,{comp:this})))}},h=({purge:t})=>o("span",null,a.count," of ",a.list.length," remaining [",o("a",{href:"",onClick:t},"purge"),"]"),f=()=>o("ul",null,a.list.map(((t,e)=>o("check-todo",{done:t.done,text:t.text,n:e,onTodo:t=>function(t){a.list[t].done=!a.list[t].done,d()}(t.detail)})))),g=({comp:t})=>o("form",null,o("input",{type:"text",size:30,placeholder:"add new todo here",ref:e=>t.input=e,onKeyUp:t.onKeyUp}),o("input",{type:"submit",value:"add",onClick:t.onAdd,disabled:t.disabled}));p.style=":host{display:block}a{color:#0088cc;text-decoration:none;margin:4px}ul{padding:0;margin:0 0 9px 0;list-style:none}";export{r as check_todo,p as my_todo}